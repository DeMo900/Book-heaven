<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All Books | Book Haven</title>
 <link rel="stylesheet" href="/css/books.css">
</head>
<body>
<%- include("includes/nav.ejs")%>

  <main>
    <form class="search-bar" id="form">
      <input id="search" type="text" name="value" placeholder="Search for a book or genre..." required />
    </form>
    <div id="div"></div>
    <%if(data.length === 0){%>

    <section class = 'hero'>
      <p>No results found ðŸ˜¢</p>
    </section> 
   <%}%>
  </div>
     
<% if (data.length > 0) { %>
  <section id="bookgrid" class="book-container">
    <% data.forEach((book)=>{ %>
      <div class="book-card">
        <div class="book-info">
          <a href="<%=`../uploads/${book.filename}`%>">
          <img src="<%= book.coverurl.startsWith('http') ? book.coverurl : `../uploads/${book.coverurl}` %>" alt="Book Cover" />
          </a>
          <h3><%= book.title %></h3>
          <p><%= book.author %></p>
          <p><%= book.publisyear %></p>
          <%if(staredbooks.length>0){%>
          <%for(const el of staredbooks){%>
<%if(el.title===book.title){%>
  <p id="star">â˜…</p>  
  <%break;%>
<%}else{%>
<p id ="star">&#9734;</p>
<%break;%>
<%}%>
    <%}%>
    <%}else{%>
<p id="star">&#9734;</p>     
    <%}%>

          <span class="genre-tag"><%= book.genre %></span>
        </div>
      </div>
    <% }) %>
  </section>
<% } %>
 
  </main>

  <footer>
    <p>Â© 2025 Book Haven. All rights reserved.</p>
  </footer>

  <script src="/js/script.js"></script>
</body>
</html>
